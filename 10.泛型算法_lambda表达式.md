### Lambda表达式
+ 可调用对象（callable object):对于一个对象或一个表达式，如果可以对其使用调用运算符，则称它为可调用的。即，如果e是一个可调用的表达式，则可以编写代码e(args)，其中args是一个逗号分隔的一个或多个参数的列表。
+ 可调用对象有如下四种：
  * 函数
  * 函数指针
  * 重载了函数调用运算符的类
  * lambda表达式(lambda expression)
  
+ 一个lambda表达式表示一个可调用的代码单元。可以将其理解为一个未命名的内联函数。
+ 与任何函数类似，一个lambda具有一个返回类型，一个参数列表和一个函数体。但与函数不同，lambda可能定义在函数内部。
+ 与普通函数不同，lambda必须使用尾置返回来制定返回类型。如果忽略返回类型，lambda根据函数体中的代码推断出返回类型。如果函数体只是一个return语句，则返回类型从返回的表达式的类型推断而来。否则，返回类型为void。
+ 与普通函数不同，lambda不能有默认参数。
+ 一个lambda只有在其捕获列表中捕获一个它所在函数中的局部变量，才能在函数体中使用该变量。
+ 捕获列表只用于局部非static变量，一个lambda可以直接使用局部static变量和在它所在函数之外声明的名字
```
 [capture list] (parameter list) -> return type {function body}
```

### lambda捕获和返回
+ 当定义一个lambda时，编译器生成一个与lambda对应的新的（未命名的）类类型。可以这样理解，当向一个函数传递一个lambda时，同时定义了一个新类型和该类型的一个对象：传递的参数就是此编译器生成的类类型的未命名对象。类似的，当使用auto定义一个用lambda初始化的变量时，定义了一个从lambda生成的类型的对象。
+ 默认情况下，从lambda生成的类都包含一个对应该lambda所捕获的变量的数据成员。类似任何普通类的数据成员，lambda的数据成员也在lambda对象创建时被初始化。

#### 值捕获
+ 与传值参数类似，采用值捕获的前提是变量可以拷贝。与参数不同，被捕获的变量的值是在lambda创建时拷贝，而不是调用时拷贝。
```
void fcn1()
{
 size_t v1 = 42;  //局部变量
 auto f = [v1] {return v1;} //将v1拷贝到名为f的可调用对象
 v1 = 0;
 auto j = f(); // j为42；f保存了创建它时v1的拷贝
```

#### 引用捕获
+ 引用捕获与返回引用有着同样的问题和限制。如果采用引用方式捕获一个变量，必须确保被引用的对象在lambda之行的时候是存在的。
+ 也可以从一个函数返回lambda。函数可以直接返回一个可调用对象，或者返回一个类对象，该类含有可调用对象的数据成员。如果函数返回一个lambda，则与函数不能返回一个局部变量的引用类似，此lambda也不能包含引用捕获。
+ 当以引用方式捕获一个变量时，必须保证在lambda之行时变量是存在的。
+ 捕获一个普通变量，如int，string或其它非指针类型，通常可以采用简单的值捕获方式。在此情况下，只需关注变量在捕获时是否有所需的值就可以了
+ 如果捕获一个指针或迭代器，或采用引用捕获方式，就必须确保在lambda执行时，绑定到迭代器，指针或引用的对象仍然存在。而且，需要保证对象具有预期的值。在lambda从创建到它执行的这段时间内，可能有代码改变绑定的对象的值。也就是，在指针（或引用）被捕获的时刻，绑定的对象的值是所期望的，但在lambda执行时，该对象的值可能已经完全不同了。
+ 一般来说，应尽量减少捕获的数据量，来避免潜在的捕获导致的问题。而且，如果可能的话，应该避免捕获指针或引用。

#### 隐式捕获
+ 当混合使用隐式捕获和显式捕获时，捕获列表中的第一个元素必须是一个&或＝。
+ 当混用隐式捕获和显式捕获时，显式捕获的变量必须使用与隐式捕获不同的方式。
+ lambda捕获列表
 * []: 空捕获列表。lambda不能使用所在函数中的变量。一个lambda只有捕获变量后才能使用它们。
 * [names]: names是一个逗号分隔的名字列表，这些名字都是lambda所在函数的局部变量。默认情况下，捕获列表中的变量都被拷贝。名字前如果使用了&，则采用引用捕获方式
 * [&]: 隐式捕获列表，采用引用捕获方式。lambda体中所使用的来自所在函数的实体都采用引用方式使用
 * [=]: 隐式捕获列表，采用值捕获方式。lambda体将拷贝所使用的来自所在函数的实体的值。
 * [&, identifier_list]: identifier_list是一个逗号分隔的列表，包含0个或多个来自所在函数的变量。这些变量采用值捕获方式，而任何隐式捕获的变量都采用引用方式捕获。identifier_list中的名字前面不能使用&。
 * [=, identifier_list]: identifier_listo中的变量采用引用方式捕获，而任何隐式捕获的变量都采用值方式捕获。identifier_list中的名字不能包括this，且这些名字之前必须使用&。
